<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Architecture | Okta Multi Tenant Admin</title>
    <meta name="generator" content="VuePress 1.4.1">
    
    <meta name="description" content="Identity Management for Multi-Tenant Applications">
    <link rel="preload" href="/assets/css/0.styles.a1281b1c.css" as="style"><link rel="preload" href="/assets/js/app.5de07984.js" as="script"><link rel="preload" href="/assets/js/3.85257a85.js" as="script"><link rel="preload" href="/assets/js/4.ca1ac1f6.js" as="script"><link rel="prefetch" href="/assets/js/10.3d3a8d8f.js"><link rel="prefetch" href="/assets/js/11.bec31144.js"><link rel="prefetch" href="/assets/js/12.15c8e2f2.js"><link rel="prefetch" href="/assets/js/13.651ceffb.js"><link rel="prefetch" href="/assets/js/5.76b37fec.js"><link rel="prefetch" href="/assets/js/6.eedba611.js"><link rel="prefetch" href="/assets/js/7.dd2fd72c.js"><link rel="prefetch" href="/assets/js/8.570e25bb.js"><link rel="prefetch" href="/assets/js/9.d294fb2a.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.047b1ff6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a1281b1c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://www.okta.com/sites/all/themes/Okta/images/logos/developer/Dev_Logo-02_Large.png" alt="Okta Multi Tenant Admin" class="logo"> <span class="site-name can-hide">Okta Multi Tenant Admin</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/api/" class="nav-link">
  API Reference
</a></div><div class="nav-item"><a href="https://okta-mta.idp.rocks" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Demo
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/udplabs/mta-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/api/" class="nav-link">
  API Reference
</a></div><div class="nav-item"><a href="https://okta-mta.idp.rocks" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Demo
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/udplabs/mta-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/" class="sidebar-link">About</a></li><li><a href="/guide/org-setup.html" class="sidebar-link">Setup</a></li><li><a href="/guide/architecture.html" class="active sidebar-link">Architecture</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/architecture.html#okta-basics-users-groups-applications" class="sidebar-link">Okta Basics: Users, Groups, Applications</a></li><li class="sidebar-sub-header"><a href="/guide/architecture.html#groups" class="sidebar-link">Groups</a></li><li class="sidebar-sub-header"><a href="/guide/architecture.html#group-admin-role" class="sidebar-link">Group Admin Role</a></li><li class="sidebar-sub-header"><a href="/guide/architecture.html#oauth-for-okta" class="sidebar-link">OAuth for Okta</a></li><li class="sidebar-sub-header"><a href="/guide/architecture.html#api-access-management" class="sidebar-link">API Access Management</a></li></ul></li><li><a href="/guide/api-design.html" class="sidebar-link">API Design</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="architecture"><a href="#architecture" class="header-anchor">#</a> Architecture</h1> <h2 id="okta-basics-users-groups-applications"><a href="#okta-basics-users-groups-applications" class="header-anchor">#</a> Okta Basics: Users, Groups, Applications</h2> <p>An Okta Org supports having only one directory of users, who belong to one or more groups. Groups in Okta are flat, but users can belong to any number of groups. Users are <em>assigned</em> to applications. And groups can also be assigned to applications (When a group is assigned to an application, all users of the group are assigned to the application). The user object can store any number of custom attributes. Groups can store a name and description.</p> <p><img src="data:image/png;base64,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" alt="alt text"></p> <h2 id="groups"><a href="#groups" class="header-anchor">#</a> Groups</h2> <p>Although Groups in Okta are flat in structure and only store name and description, it is acceptable practice to use naming convention and/or namespacing to simulate group-types, group hierarchy or nested group structures. One key feature of Okta Groups is that the API supports <a href="https://developer.okta.com/docs/reference/api/groups/#search-groups" target="_blank" rel="noopener noreferrer">search<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> with <em><strong>startsWith</strong></em>, which allows us to support our architecture. We illustrate with some examples, below.</p> <h3 id="example-1-group-hierarchy"><a href="#example-1-group-hierarchy" class="header-anchor">#</a> Example 1: Group Hierarchy</h3> <p>Okta can support nested groups (or group hierarchy) by applying namespacing to the group name. For example, a hierarchy looking like the following:
<img src="data:image/png;base64,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" alt="alt text"></p> <p>Can be <em>flattened</em> and represented with the following group naming convention:</p> <table><thead><tr><th>Group Name</th></tr></thead> <tbody><tr><td>okta.com</td></tr> <tr><td>okta.com/dac</td></tr> <tr><td>okta.com/dac/admins</td></tr> <tr><td>okta.com/dac/users</td></tr> <tr><td>okta.com/byob</td></tr> <tr><td>okta.com/byob/users</td></tr></tbody></table> <hr> <h3 id="example-2-group-types"><a href="#example-2-group-types" class="header-anchor">#</a> Example 2: Group Types</h3> <p>Okta can support having group types by naming convention by prefixing group names with the group type:</p> <table><thead><tr><th>Type</th> <th>Group</th> <th>Naming Convention</th></tr></thead> <tbody><tr><td>role</td> <td>readonly</td> <td>role_readonly</td></tr> <tr><td>role</td> <td>admin</td> <td>role_admin</td></tr> <tr><td>ou</td> <td>sales</td> <td>ou_sales</td></tr> <tr><td>ou</td> <td>engineering</td> <td>ou_engineering</td></tr></tbody></table> <ul><li>In order to list all the groups of a single type, use the search groups API with <code>search string = group type</code><div class="language- extra-class"><pre class="language-text"><code>GET https://${yourOktaDomain}/api/v1/Groups?q=${groupType}
</code></pre></div></li> <li>In order to search for a group by name (within a group type) simply prefix the search string with the group type<div class="language- extra-class"><pre class="language-text"><code>GET https://${yourOktaDomain}/api/v1/Groups?q=${groupType}startsWith
</code></pre></div></li></ul> <hr> <h3 id="okta-dac"><a href="#okta-dac" class="header-anchor">#</a> okta-dac:</h3> <p>In the okta-dac project, we implement the <em>Example 2</em> design pattern to create 2 classes of users – 1) Admins, and 2) Users – By prefixing group names with either <strong>ADMINS_</strong> and <strong>USERS_</strong>, respectively.</p> <p>The string following the prefix refers to the tenant name. For example, if we have 2 customers, <code>tenant1</code> and <code>tenant2</code> in our SaaS application, we'll have 2 sets of groups: <code>ADMINS_tenant1</code>, <code>ADMINS_tenant2</code> and <code>USERS_tenant1</code>, <code>USERS_tenant2</code> in Okta.</p> <p>Each customer's user is a member of their respective <code>USERS_</code> group. If the user is also a Tenant Admin, they'll be assigned to the <code>ADMINS_</code> group.</p> <p><img src="/assets/img/dac-map.37b0ebb1.png" alt="alt text"></p> <h2 id="group-admin-role"><a href="#group-admin-role" class="header-anchor">#</a> Group Admin Role</h2> <p>Okta supports <strong>delegated admin</strong> functionality by allowing users to hold the <a href="https://help.okta.com/en/prod/Content/Topics/Security/admin-role-groupadmin.htm" target="_blank" rel="noopener noreferrer">Group Admin Role<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> role. This functionality allows specific groups to be designated to specific Group Admins; And will restrict the Group Admins to only be able to view and perform updates those specifc groups (and the users in them).</p> <p>Read more about the different <a href="https://help.okta.com/en/prod/Content/Topics/Security/Administrators.htm" target="_blank" rel="noopener noreferrer">Administrator Roles<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> in Okta to get a better understanding of how we leveraged the Group Admin role.</p> <h2 id="oauth-for-okta"><a href="#oauth-for-okta" class="header-anchor">#</a> OAuth for Okta</h2> <h3 id="what-is-oauth-for-okta"><a href="#what-is-oauth-for-okta" class="header-anchor">#</a> What is <a href="https://developer.okta.com/docs/guides/implement-oauth-for-okta/overview/" target="_blank" rel="noopener noreferrer">OAuth for Okta<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>?</h3> <h3 id="what-is-an-okta-session"><a href="#what-is-an-okta-session" class="header-anchor">#</a> What is an Okta session?</h3> <p>With an existing session, we can <strong>fetch the bearer token</strong> using the <a href="https://github.com/okta/okta-auth-js" target="_blank" rel="noopener noreferrer">Okta Auth JavaScript SDK<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Upon logging into the <strong>Delgated Admin Console</strong> app, the first component we land on is the Home.vue component. This would be a good place to fetch the token.</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token comment">// src/views/Home.vue</span>

<span class="token keyword">const</span> authJs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AuthJS</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    issuer<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$config<span class="token punctuation">.</span>oidc<span class="token punctuation">.</span>issuer<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;oauth2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    clientId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$config<span class="token punctuation">.</span>oidc<span class="token punctuation">.</span>client_id<span class="token punctuation">,</span>
    redirectUri<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$config<span class="token punctuation">.</span>oidc<span class="token punctuation">.</span>redirect_uri<span class="token punctuation">,</span>
    pkce<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> exists <span class="token operator">=</span> <span class="token keyword">await</span> authJs<span class="token punctuation">.</span>session<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>exists<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> authJs<span class="token punctuation">.</span>token<span class="token punctuation">.</span><span class="token function">getWithoutPrompt</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            scopes<span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;openid&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;okta.users.manage&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;okta.groups.manage&quot;</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> accessToken <span class="token operator">=</span> res<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">token</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> token<span class="token punctuation">.</span>accessToken<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token comment">// vuex</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&quot;setO4oToken&quot;</span><span class="token punctuation">,</span> accessToken<span class="token punctuation">.</span>accessToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">mutation<span class="token punctuation">,</span> state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Got mutation&quot;</span><span class="token punctuation">,</span> mutation<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><a href="https://github.com/okta/okta-auth-js#sessionexists" target="_blank" rel="noopener noreferrer"><code>authJs.session.exists()</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> checks to see if user has logged-in (i.e. an Okta session exists)</li> <li><a href="https://github.com/okta/okta-auth-js#tokengetwithoutpromptoptions" target="_blank" rel="noopener noreferrer"><code>authJs.token.getWithoutPrompt()</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> makes an OAuth &quot;authorize&quot; request and authenticates using an existing session.</li></ul> <h2 id="api-access-management"><a href="#api-access-management" class="header-anchor">#</a> API Access Management</h2> <p><a href="https://developer.okta.com/docs/concepts/api-access-management/" target="_blank" rel="noopener noreferrer">API Access Management<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> overview</p> <h3 id="embedding-the-tenants-claim"><a href="#embedding-the-tenants-claim" class="header-anchor">#</a> Embedding the <code>tenants</code> claim</h3> <p>How we configured Okta</p> <h3 id="embedding-the-groups-claim"><a href="#embedding-the-groups-claim" class="header-anchor">#</a> Embedding the <code>groups</code> claim</h3> <p>How we configured Okta</p> <h3 id="custom-authorizer"><a href="#custom-authorizer" class="header-anchor">#</a> Custom Authorizer</h3> <p>In the custom authorizer, we restrict access to the tenant-namespaced route based on which tenant the user is an ADMIN of:</p> <div class="language-js extra-class"><pre class="language-js"><code>jwt<span class="token punctuation">.</span>claims<span class="token punctuation">.</span>groups<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">grp</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>grp<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'ADMINS_'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        policy<span class="token punctuation">.</span><span class="token function">allowMethod</span><span class="token punctuation">(</span>AuthPolicy<span class="token punctuation">.</span>HttpVerb<span class="token punctuation">.</span><span class="token constant">GET</span><span class="token punctuation">,</span> <span class="token string">&quot;/admin/api/v1/tenants/&quot;</span> <span class="token operator">+</span> grp<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'_'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        policy<span class="token punctuation">.</span><span class="token function">allowMethod</span><span class="token punctuation">(</span>AuthPolicy<span class="token punctuation">.</span>HttpVerb<span class="token punctuation">.</span><span class="token constant">PUT</span><span class="token punctuation">,</span> <span class="token string">&quot;/admin/api/v1/tenants/&quot;</span> <span class="token operator">+</span> grp<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'_'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&quot;/admins/*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/udplabs/mta-docs/edit/master/docs/guide/architecture.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/28/2020, 6:14:36 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/org-setup.html" class="prev">
        Setup
      </a></span> <span class="next"><a href="/guide/api-design.html">
        API Design
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5de07984.js" defer></script><script src="/assets/js/3.85257a85.js" defer></script><script src="/assets/js/4.ca1ac1f6.js" defer></script>
  </body>
</html>
