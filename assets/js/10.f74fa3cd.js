(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{353:function(t,s,a){"use strict";a.r(s);var n=a(33),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"setup"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#setup"}},[t._v("#")]),t._v(" Setup")]),t._v(" "),a("h2",{attrs:{id:"terraform"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#terraform"}},[t._v("#")]),t._v(" Terraform")]),t._v(" "),a("p",[t._v("A "),a("a",{attrs:{href:"https://www.terraform.io/docs/providers/okta/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("terraform"),a("OutboundLink")],1),t._v(" script has been provided to automatically configure your Okta Org.")]),t._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[t._v("Click to view the script")]),t._v(" "),a("div",{staticClass:"language-hcl extra-class"},[a("pre",{pre:!0,attrs:{class:"language-hcl"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## BYOB Okta Org configuration for:")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    Oauth2 SPA")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    Custom authorization server for SPA")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TF Variables")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("variable"),a("span",{pre:!0,attrs:{class:"token type variable"}},[t._v(' "org_name" ')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("variable"),a("span",{pre:!0,attrs:{class:"token type variable"}},[t._v(' "api_token" ')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("variable"),a("span",{pre:!0,attrs:{class:"token type variable"}},[t._v(' "base_url" ')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("variable"),a("span",{pre:!0,attrs:{class:"token type variable"}},[t._v(' "app_url" ')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Setup Okta Tenant")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("provider"),a("span",{pre:!0,attrs:{class:"token type variable"}},[t._v(' "okta" ')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("org_name")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" var.org_name\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("api_token")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" var.api_token\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("base_url")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" var.base_url\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("version")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"~> 3.0"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#provider "aws" {')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#  region                  = "us-west-2"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#  shared-credentials-file = "~/.aws/creds"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#  profile                 = "udp-admin"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# BYOB Users - Everyone ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("resource "),a("span",{pre:!0,attrs:{class:"token type variable"}},[t._v('"okta_group"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"byob-users"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("name")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Everyone"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Create OAuth2 SPA App")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("resource "),a("span",{pre:!0,attrs:{class:"token type variable"}},[t._v('"okta_app_oauth"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"okta-byob"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("label")]),t._v("                      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" local.app_name\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("type")]),t._v("                       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"browser"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("redirect_uris")]),t._v("              "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token type variable"}},[t._v("app_url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v('/implicit/callback"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token type variable"}},[t._v("app_url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v('/pkce/callback"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("grant_types")]),t._v("                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"authorization_code"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("response_types")]),t._v("             "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"code"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("token_endpoint_auth_method")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"none"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("issuer_mode")]),t._v("                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ORG_URL"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Create the App Assignment")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("resource "),a("span",{pre:!0,attrs:{class:"token type variable"}},[t._v('"okta_app_group_assignment"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"okta-byob"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("app_id")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" okta_app_oauth.okta-byob.id\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("group_id")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" okta_group.byob-users.id\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Create Trusted Origin for the APP")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("resource "),a("span",{pre:!0,attrs:{class:"token type variable"}},[t._v('"okta_trusted_origin"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"okta-byob"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("name")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"BYOB Dashboard"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("origin")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" var.app_url\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("scopes")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CORS"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"REDIRECT"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Create Custom Authorization Server")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("resource "),a("span",{pre:!0,attrs:{class:"token type variable"}},[t._v('"okta_auth_server"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"okta-byob"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("audiences")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"api://'),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("local")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token type variable"}},[t._v("app_name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v('"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("description")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Okta BYOB Authorization Server"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("name")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" local.app_name\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Create scope in custom authorization server")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# resource "okta_auth_server_scope" "okta-byob" {')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   auth_server_id   = okta_auth_server.okta-byob.id")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#   metadata_publish = "ALL_CLIENTS"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#   name             = "read:okta-byob"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#   description      = "Read okta-byob"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#   consent          = "IMPLICIT"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# }")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Create policy in custom authorization server")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("resource "),a("span",{pre:!0,attrs:{class:"token type variable"}},[t._v('"okta_auth_server_policy"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"okta-byob"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("auth_server_id")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" okta_auth_server.okta-byob.id\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("status")]),t._v("           "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ACTIVE"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("name")]),t._v("             "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"okta-byob"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("description")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"okta-byob policy"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("priority")]),t._v("         "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("client_whitelist")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("okta_app_oauth.okta-byob.client_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Create tokens claim in custom authorization server")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("resource "),a("span",{pre:!0,attrs:{class:"token type variable"}},[t._v('"okta_auth_server_claim"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"okta-byob-tenants-at"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("auth_server_id")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" okta_auth_server.okta-byob.id\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("name")]),t._v("           "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tenants"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("value")]),t._v("          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"appuser.tenants"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("value_type")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"EXPRESSION"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Not Tied to Any scope")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#scopes         = [okta_auth_server_scope.okta-byob.name]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("claim_type")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"RESOURCE"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("resource "),a("span",{pre:!0,attrs:{class:"token type variable"}},[t._v('"okta_auth_server_claim"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"okta-byob-tenants-id"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("auth_server_id")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" okta_auth_server.okta-byob.id\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("name")]),t._v("           "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tenants"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("value")]),t._v("          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"appuser.tenants"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("value_type")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"EXPRESSION"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Not Tied to Any scope")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#scopes         = [okta_auth_server_scope.okta-byob.name]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("claim_type")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"IDENTITY"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("resource "),a("span",{pre:!0,attrs:{class:"token type variable"}},[t._v('"okta_auth_server_claim"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"okta-byob-groups-at"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("auth_server_id")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" okta_auth_server.okta-byob.id\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("name")]),t._v("              "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"groups"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("value")]),t._v("             "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('".*"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("value_type")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"GROUPS"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("group_filter_type")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"REGEX"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Not Tied to Any scope")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#scopes         = [okta_auth_server_scope.okta-byob.name]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("claim_type")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"RESOURCE"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# resource "okta_auth_server_claim" "okta-byob-groups-id" {')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   auth_server_id    = okta_auth_server.okta-byob.id")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#   name              = "groups"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#   value             = ".*"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#   value_type        = "GROUPS"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#   group_filter_type = "REGEX"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   ## Not Tied to Any scope")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   #scopes         = [okta_auth_server_scope.okta-byob.name]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#   claim_type = "RESOURCE"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# }")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Create policy rule in custom authorization server")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("resource "),a("span",{pre:!0,attrs:{class:"token type variable"}},[t._v('"okta_auth_server_policy_rule"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"okta-byob"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("auth_server_id")]),t._v("                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" okta_auth_server.okta-byob.id\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("policy_id")]),t._v("                     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" okta_auth_server_policy.okta-byob.id\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("status")]),t._v("                        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ACTIVE"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("name")]),t._v("                          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"okta byob rule"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("priority")]),t._v("                      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("grant_type_whitelist")]),t._v("          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"authorization_code"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("scope_whitelist")]),t._v("               "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("group_whitelist")]),t._v("               "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("okta_group.byob-users.id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("access_token_lifetime_minutes")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Outputs")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("output"),a("span",{pre:!0,attrs:{class:"token type variable"}},[t._v(' "okta_app_oauth_client_id" ')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("value")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" okta_app_oauth.okta-byob.client_id\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("output"),a("span",{pre:!0,attrs:{class:"token type variable"}},[t._v(' "okta_auth_server_id" ')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("value")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" okta_auth_server.okta-byob.id\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("output"),a("span",{pre:!0,attrs:{class:"token type variable"}},[t._v(' "okta_auth_server_issuer_uri" ')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("value")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://'),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token type variable"}},[t._v("org_name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v("."),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token type variable"}},[t._v("base_url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v("/oauth2/"),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("okta_auth_server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("okta-byob"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v('"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Local variables")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("locals")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("app_name")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"byob-dashboard"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])])])])]),t._v(" "),a("p",[a("a",{attrs:{href:"/tf/sample.hcl"}},[t._v("Click here")]),t._v(" to download.")]),t._v(" "),a("p",[t._v("If you're more comfortable setting it up manually, carefully follow the instructions in this "),a("a",{attrs:{href:"#org-setup"}},[t._v("next")]),t._v(" section.")]),t._v(" "),a("h2",{attrs:{id:"okta-org-setup"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#okta-org-setup"}},[t._v("#")]),t._v(" Okta Org Setup")]),t._v(" "),a("ul",[a("li",[t._v("Step 1")]),t._v(" "),a("li",[t._v("Step 2")]),t._v(" "),a("li",[t._v("Step 3")])])])}),[],!1,null,null,null);s.default=e.exports}}]);